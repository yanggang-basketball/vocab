<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="theme-color" content="#0b1220">
<title>ä¸­è‹±è¯æ±‡è‡ªæµ‹</title>

<style>
:root{
  --bg:#0b1220; --card:#111a2e; --text:#eaf0ff;
  --muted:#9fb0d6; --ok:#35d07f; --bad:#ff5a6a;
}
*{box-sizing:border-box;}
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family:system-ui,-apple-system,"PingFang SC","Microsoft YaHei",sans-serif;
}
.wrap{max-width:720px;margin:auto;padding:12px;}
.card{
  background:var(--card);
  border-radius:18px;
  padding:18px;
  margin-bottom:14px;
}
h1{margin:0;font-size:20px;}

button,select{
  width:100%;
  margin-top:10px;
  font-size:16px;
  padding:14px;
  border-radius:14px;
  border:none;
}
button{background:#2b3f78;color:white;}
button:active{opacity:.85;}
select{background:#0b1220;color:var(--text);border:1px solid #223255;}

.prompt{
  margin-top:16px;
  padding:22px;
  border-radius:16px;
  background:#0f1830;
  text-align:center;
  cursor:pointer;
}
.prompt .v{
  font-size:32px;
  font-weight:800;
}
.answer{
  display:none;
  margin-top:14px;
  text-align:center;
  font-size:26px;
  font-weight:700;
  cursor:pointer;
}
.btn-know{background:#2f7d4c;}
.btn-dont{background:#8a3a3a;}
.btn-next{background:#2b3f78;}

.notice{
  background:#402c1a;
  color:#ffd18b;
  padding:12px;
  border-radius:12px;
  font-size:14px;
  margin-bottom:10px;
  display:none;
}
.speed{
  display:flex;
  gap:10px;
  margin-top:10px;
}
.speed button{flex:1;}
.active{outline:2px solid #fff;}
</style>
</head>

<body>
<div class="wrap">

  <!-- å¾®ä¿¡æç¤º -->
  <div class="notice" id="wxNotice">
    âš ï¸ å½“å‰åœ¨å¾®ä¿¡ä¸­æ‰“å¼€ï¼Œæœ—è¯»åŠŸèƒ½å¯èƒ½å—é™ã€‚<br>
    å»ºè®®å³ä¸Šè§’ â€œâ€¦â€ â†’ åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ã€‚
  </div>

  <div class="card">
    <h1>ä¸­è‹±è¯æ±‡è‡ªæµ‹</h1>

    <!-- è¯­éŸ³è§£é” -->
    <button id="enableAudio">ğŸ”Š ç‚¹å‡»å¼€å¯æœ—è¯»</button>

    <!-- è¯­é€Ÿ -->
    <div class="speed">
      <button id="speedSlow">ğŸ¢ æ…¢é€Ÿ</button>
      <button id="speedNormal" class="active">ğŸ‡ æ­£å¸¸</button>
    </div>

    <!-- æ–¹å‘ -->
    <select id="direction">
      <option value="en2zh">è‹± â†’ ä¸­</option>
      <option value="zh2en">ä¸­ â†’ è‹±</option>
    </select>

    <!-- åˆ†ç±» -->
    <select id="category">
      <option value="all">å…¨éƒ¨</option>
      <option value="fruit">æ°´æœ</option>
      <option value="color">é¢œè‰²</option>
      <option value="action">åŠ¨ä½œ</option>
      <option value="clothes">è¡£ç‰©</option>
      <option value="person">äººå</option>
      <option value="time">æ—¶é—´</option>
      <option value="object">ç‰©å“ / åŠ¨ç‰©</option>
    </select>

    <!-- é¢˜ç›® -->
    <div class="prompt" id="questionBox">
      <div class="v" id="question">â€”</div>
    </div>

    <!-- ç­”æ¡ˆ -->
    <div class="answer" id="answerBox"></div>

    <button class="btn-know" onclick="reveal()">æˆ‘çŸ¥é“ ğŸ‘</button>
    <button class="btn-dont" onclick="reveal()">æˆ‘ä¸çŸ¥é“ ğŸ¤”</button>
    <button class="btn-next" onclick="next()">ä¸‹ä¸€é¢˜ â–¶</button>
  </div>
</div>

<script>
const ALL_WORDS = [
  {en:"a banana",zh:"ä¸€æ ¹é¦™è•‰",cat:"fruit"},
  {en:"a peach",zh:"ä¸€ä¸ªæ¡ƒå­",cat:"fruit"},
  {en:"a cherry",zh:"ä¸€é¢—æ¨±æ¡ƒ",cat:"fruit"},
  {en:"a grape",zh:"ä¸€é¢—è‘¡è„",cat:"fruit"},

  {en:"pink",zh:"ç²‰è‰²",cat:"color"},
  {en:"red",zh:"çº¢è‰²",cat:"color"},
  {en:"blue",zh:"è“è‰²",cat:"color"},
  {en:"green",zh:"ç»¿è‰²",cat:"color"},

  {en:"dance",zh:"è·³èˆ",cat:"action"},
  {en:"sing",zh:"å”±æ­Œ",cat:"action"},
  {en:"draw",zh:"ç”»ç”»",cat:"action"},
  {en:"cook",zh:"åšé¥­",cat:"action"},

  {en:"a coat",zh:"ä¸€ä»¶å¤–å¥—",cat:"clothes"},
  {en:"a scarf",zh:"ä¸€æ¡å›´å·¾",cat:"clothes"},
  {en:"a beanie",zh:"ä¸€é¡¶å°ä¾¿å¸½",cat:"clothes"},
  {en:"a sweater",zh:"ä¸€ä»¶æ¯›è¡£",cat:"clothes"},

  {en:"Liu Tao",zh:"åˆ˜æ¶›",cat:"person"},
  {en:"Yang Ling",zh:"æ¨ç²",cat:"person"},
  {en:"Wang Bing",zh:"ç‹å…µ",cat:"person"},
  {en:"Su Hai",zh:"è‹æµ·",cat:"person"},
  {en:"Miss Li",zh:"æè€å¸ˆï¼ˆå¥³ï¼‰",cat:"person"},
  {en:"Mr Green",zh:"æ ¼æ—å…ˆç”Ÿ",cat:"person"},

  {en:"dad",zh:"çˆ¸çˆ¸",cat:"person"},
  {en:"mum",zh:"å¦ˆå¦ˆ",cat:"person"},

  {en:"morning",zh:"æ—©ä¸Š",cat:"time"},
  {en:"afternoon",zh:"ä¸‹åˆ",cat:"time"},
  {en:"evening",zh:"æ™šä¸Šï¼ˆå‚æ™šï¼‰",cat:"time"},
  {en:"night",zh:"å¤œæ™šï¼ˆå¤œé‡Œï¼‰",cat:"time"},

  {en:"a teddy",zh:"ä¸€åªæ³°è¿ªç†Š",cat:"object"},
  {en:"a box",zh:"ä¸€ä¸ªç›’å­",cat:"object"},
  {en:"a bag",zh:"ä¸€ä¸ªåŒ…",cat:"object"},
  {en:"a puppy",zh:"ä¸€åªå°ç‹—",cat:"object"}
];

let words = [...ALL_WORDS];
let i = 0;
let audioEnabled = false;
let rate = 1.0;

const q = document.getElementById("question");
const a = document.getElementById("answerBox");
const dir = document.getElementById("direction");
const catSel = document.getElementById("category");

/* å¾®ä¿¡æ£€æµ‹ */
if (/MicroMessenger/i.test(navigator.userAgent)) {
  document.getElementById("wxNotice").style.display = "block";
}

/* è¯­éŸ³è§£é” */
document.getElementById("enableAudio").onclick = () => {
  const u = new SpeechSynthesisUtterance("æœ—è¯»å·²å¼€å¯");
  u.lang = "zh-CN";
  speechSynthesis.speak(u);
  audioEnabled = true;
  document.getElementById("enableAudio").style.display = "none";
};

/* è¯­é€Ÿ */
document.getElementById("speedSlow").onclick = () => setRate(0.7, "speedSlow");
document.getElementById("speedNormal").onclick = () => setRate(1.0, "speedNormal");

function setRate(r, id){
  rate = r;
  document.querySelectorAll(".speed button").forEach(b=>b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

/* å‘éŸ³ */
function speak(text){
  if(!audioEnabled) return;
  speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(text);
  u.lang = /[a-z]/i.test(text) ? "en-US" : "zh-CN";
  u.rate = rate;
  speechSynthesis.speak(u);
}

/* å‡ºé¢˜ */
function filterWords(){
  const c = catSel.value;
  words = c==="all" ? [...ALL_WORDS] : ALL_WORDS.filter(w=>w.cat===c);
  i = 0;
  show();
}

function show(){
  a.style.display = "none";
  q.textContent = dir.value==="en2zh" ? words[i].en : words[i].zh;
}

function reveal(){
  const right = dir.value==="en2zh" ? words[i].zh : words[i].en;
  a.textContent = right;
  a.style.display = "block";
  speak(right);
}

function next(){
  i = (i + 1) % words.length;
  show();
}

document.getElementById("questionBox").onclick = ()=>speak(q.textContent);
a.onclick = ()=>speak(a.textContent);
dir.onchange = show;
catSel.onchange = filterWords;

filterWords();
</script>
</body>
</html>

